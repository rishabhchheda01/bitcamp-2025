{"ast":null,"code":"var _jsxFileName = \"/Users/aryan/Desktop/Hackathons/Bitcamp25/test-voice/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { RetellWebClient } from \"retell-client-js-sdk\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [isCallActive, setIsCallActive] = useState(false);\n  const [retellWebClient, setRetellWebClient] = useState(null);\n  const [eventStatus, setEventStatus] = useState({\n    callStarted: false,\n    callEnded: false,\n    agentStartTalking: false,\n    agentStopTalking: false,\n    error: null,\n    transcript: ''\n  });\n  const [micPermission, setMicPermission] = useState(null);\n  const [accessToken, setAccessToken] = useState('');\n  const [isGeneratingToken, setIsGeneratingToken] = useState(false);\n  const [callInfo, setCallInfo] = useState(null);\n\n  // Agent ID for Retell\n  const AGENT_ID = \"agent_30b1b504a89d37e3109a7da3e9\";\n\n  // Server endpoint for token generation\n  const TOKEN_SERVER_URL = \"http://127.0.0.1:5000/api/generate-token\";\n  useEffect(() => {\n    // Initialize the RetellWebClient\n    const client = new RetellWebClient();\n    setRetellWebClient(client);\n\n    // Check for microphone permissions\n    checkMicrophonePermission();\n\n    // Set up event listeners\n    client.on(\"call_started\", () => {\n      console.log(\"call started\");\n      setEventStatus(prev => ({\n        ...prev,\n        callStarted: true,\n        callEnded: false\n      }));\n    });\n    client.on(\"call_ended\", () => {\n      console.log(\"call ended\");\n      setIsCallActive(false);\n      setEventStatus(prev => ({\n        ...prev,\n        callEnded: true\n      }));\n    });\n    client.on(\"agent_start_talking\", () => {\n      console.log(\"agent_start_talking\");\n      setEventStatus(prev => ({\n        ...prev,\n        agentStartTalking: true,\n        agentStopTalking: false\n      }));\n    });\n    client.on(\"agent_stop_talking\", () => {\n      console.log(\"agent_stop_talking\");\n      setEventStatus(prev => ({\n        ...prev,\n        agentStopTalking: true,\n        agentStartTalking: false\n      }));\n    });\n    client.on(\"update\", update => {\n      console.log(\"Update received:\", update);\n      if (update.transcript) {\n        setEventStatus(prev => ({\n          ...prev,\n          transcript: update.transcript\n        }));\n      }\n    });\n    client.on(\"metadata\", metadata => {\n      console.log(\"Metadata received:\", metadata);\n    });\n    client.on(\"error\", error => {\n      console.error(\"An error occurred:\", error);\n      setEventStatus(prev => ({\n        ...prev,\n        error: error.message || \"Unknown error\"\n      }));\n      client.stopCall();\n    });\n\n    // Clean up event listeners on component unmount\n    return () => {\n      if (client) {\n        client.stopCall();\n      }\n    };\n  }, []);\n\n  // Function to generate an access token from the server\n  const generateAccessToken = async () => {\n    try {\n      setIsGeneratingToken(true);\n      setEventStatus(prev => ({\n        ...prev,\n        error: null\n      }));\n      console.log(\"Requesting access token from server...\");\n\n      // Make the API call to our server endpoint\n      const response = await fetch(TOKEN_SERVER_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          agent_id: AGENT_ID\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || `Server responded with status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (!data.access_token) {\n        throw new Error(\"No access token received from server\");\n      }\n      console.log(\"Access token received from server:\", data.access_token);\n      setAccessToken(data.access_token);\n      setCallInfo(data); // Store the full call info for reference\n      setIsGeneratingToken(false);\n      return data.access_token;\n    } catch (error) {\n      console.error(\"Failed to generate access token:\", error);\n      setEventStatus(prev => ({\n        ...prev,\n        error: error.message || \"Failed to generate access token\"\n      }));\n      setIsGeneratingToken(false);\n      return null;\n    }\n  };\n  const checkMicrophonePermission = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      setMicPermission('granted');\n      // Stop the stream tracks immediately\n      stream.getTracks().forEach(track => track.stop());\n    } catch (error) {\n      console.error('Microphone permission denied:', error);\n      setMicPermission('denied');\n    }\n  };\n  const requestMicrophonePermission = async () => {\n    try {\n      await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      setMicPermission('granted');\n      return true;\n    } catch (error) {\n      console.error('Failed to get microphone permission:', error);\n      setMicPermission('denied');\n      return false;\n    }\n  };\n  const startCall = async () => {\n    if (!retellWebClient || isCallActive) return;\n\n    // First ensure we have microphone permissions\n    if (micPermission !== 'granted') {\n      const permissionGranted = await requestMicrophonePermission();\n      if (!permissionGranted) {\n        alert('Microphone permission is required to start a call');\n        return;\n      }\n    }\n    try {\n      // Reset event status\n      setEventStatus({\n        callStarted: false,\n        callEnded: false,\n        agentStartTalking: false,\n        agentStopTalking: false,\n        error: null,\n        transcript: ''\n      });\n\n      // Ensure we have a valid token\n      if (!accessToken) {\n        const token = await generateAccessToken();\n        if (!token) {\n          throw new Error(\"Failed to generate a valid access token\");\n        }\n      }\n      console.log(\"Starting call with access token...\");\n\n      // Start the call using the access token\n      await retellWebClient.startCall({\n        accessToken: accessToken,\n        sampleRate: 24000,\n        captureDeviceId: \"default\",\n        emitRawAudioSamples: false\n      });\n      setIsCallActive(true);\n    } catch (error) {\n      console.error(\"Failed to start call:\", error);\n      setEventStatus(prev => ({\n        ...prev,\n        error: error.message || \"Failed to start call\"\n      }));\n    }\n  };\n  const stopCall = () => {\n    if (retellWebClient && isCallActive) {\n      retellWebClient.stopCall();\n      setIsCallActive(false);\n    }\n  };\n\n  // Function to check if token is expired (tokens are valid for 30 seconds)\n  const isTokenExpired = () => {\n    // If we don't have token info, consider it expired\n    if (!accessToken || !callInfo) return true;\n\n    // Track when we received the token in our application\n    if (!callInfo._tokenReceivedTime) {\n      // If this is the first time checking, add a timestamp of when we received it\n      callInfo._tokenReceivedTime = Date.now();\n      setCallInfo({\n        ...callInfo\n      }); // Update the state to save this timestamp\n      return false; // Token is fresh\n    }\n\n    // Calculate how long ago we received the token\n    const tokenReceivedTime = callInfo._tokenReceivedTime;\n    const currentTime = Date.now();\n    const tokenAgeInSeconds = (currentTime - tokenReceivedTime) / 1000;\n\n    // Token expires after 30 seconds, but we consider it expired at 25s\n    // to give us a buffer to generate a new one\n    return tokenAgeInSeconds > 25;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    style: {\n      textAlign: 'center',\n      padding: '20px',\n      maxWidth: '800px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Retell Voice Demo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '20px 0',\n        padding: '10px',\n        backgroundColor: '#f5f5f5',\n        borderRadius: '4px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Microphone Permission: \", micPermission === 'granted' ? '✅ Granted' : micPermission === 'denied' ? '❌ Denied' : '❓ Unknown']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), micPermission !== 'granted' && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: requestMicrophonePermission,\n        style: {\n          padding: '8px 15px',\n          backgroundColor: '#2196F3',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: 'pointer'\n        },\n        children: \"Request Mic Permission\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '20px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: !accessToken || isTokenExpired() ? generateAccessToken : startCall,\n        disabled: isCallActive || isGeneratingToken,\n        style: {\n          padding: '10px 20px',\n          margin: '0 10px',\n          backgroundColor: isCallActive || isGeneratingToken ? '#ccc' : '#4CAF50',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: isCallActive || isGeneratingToken ? 'default' : 'pointer'\n        },\n        children: !accessToken || isTokenExpired() ? \"Generate Token\" : isGeneratingToken ? \"Generating...\" : \"Start Call with Agent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopCall,\n        disabled: !isCallActive,\n        style: {\n          padding: '10px 20px',\n          margin: '0 10px',\n          backgroundColor: !isCallActive ? '#ccc' : '#f44336',\n          color: 'white',\n          border: 'none',\n          borderRadius: '4px',\n          cursor: !isCallActive ? 'default' : 'pointer'\n        },\n        children: \"Stop Call\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '20px 0',\n        padding: '15px',\n        border: '1px solid #ddd',\n        borderRadius: '4px',\n        textAlign: 'left'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Call Status: \", isCallActive ? '🟢 Active' : '🔴 Inactive']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Agent ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 14\n          }, this), \" \", AGENT_ID]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), accessToken && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Access Token:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this), \" \", accessToken.substring(0, 8), \"...\", accessToken.substring(accessToken.length - 4), isTokenExpired() && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'red'\n              },\n              children: \" (Expired)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this), callInfo && callInfo.call_id && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Call ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 20\n            }, this), \" \", callInfo.call_id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Connection Info:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyleType: 'none',\n            padding: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDD11 \", accessToken ? isTokenExpired() ? \"Token expired (valid for 30 seconds)\" : \"Using valid access token\" : \"No token generated yet\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: \"\\uD83D\\uDD12 Token generated via server using Retell SDK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Event Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyleType: 'none',\n            padding: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83C\\uDFA4 Call Started: \", eventStatus.callStarted ? '✅ Yes' : '❌ No']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDED1 Call Ended: \", eventStatus.callEnded ? '✅ Yes' : '❌ No']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"\\uD83D\\uDDE3\\uFE0F Agent Talking: \", eventStatus.agentStartTalking && !eventStatus.agentStopTalking ? '✅ Yes' : '❌ No']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this), eventStatus.error && /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              color: 'red',\n              marginTop: '10px',\n              padding: '5px',\n              backgroundColor: '#ffebee',\n              borderRadius: '4px'\n            },\n            children: [\"\\u26A0\\uFE0F Error: \", eventStatus.error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), eventStatus.transcript && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '10px',\n          maxHeight: '150px',\n          overflowY: 'auto',\n          padding: '10px',\n          backgroundColor: '#f9f9f9',\n          borderRadius: '4px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Latest Transcript:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            whiteSpace: 'pre-line'\n          },\n          children: eventStatus.transcript\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '20px 0',\n        fontSize: '12px',\n        color: '#666'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Debug Info: Check console for detailed logs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 227,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"hJq3lKZ+3mk062eq9hfF+iOur4E=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","RetellWebClient","jsxDEV","_jsxDEV","App","_s","isCallActive","setIsCallActive","retellWebClient","setRetellWebClient","eventStatus","setEventStatus","callStarted","callEnded","agentStartTalking","agentStopTalking","error","transcript","micPermission","setMicPermission","accessToken","setAccessToken","isGeneratingToken","setIsGeneratingToken","callInfo","setCallInfo","AGENT_ID","TOKEN_SERVER_URL","client","checkMicrophonePermission","on","console","log","prev","update","metadata","message","stopCall","generateAccessToken","response","fetch","method","headers","body","JSON","stringify","agent_id","ok","errorData","json","Error","status","data","access_token","stream","navigator","mediaDevices","getUserMedia","audio","getTracks","forEach","track","stop","requestMicrophonePermission","startCall","permissionGranted","alert","token","sampleRate","captureDeviceId","emitRawAudioSamples","isTokenExpired","_tokenReceivedTime","Date","now","tokenReceivedTime","currentTime","tokenAgeInSeconds","className","style","textAlign","padding","maxWidth","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","backgroundColor","borderRadius","onClick","color","border","cursor","disabled","marginTop","substring","length","call_id","listStyleType","maxHeight","overflowY","whiteSpace","fontSize","_c","$RefreshReg$"],"sources":["/Users/aryan/Desktop/Hackathons/Bitcamp25/test-voice/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { RetellWebClient } from \"retell-client-js-sdk\";\n\nfunction App() {\n  const [isCallActive, setIsCallActive] = useState(false);\n  const [retellWebClient, setRetellWebClient] = useState(null);\n  const [eventStatus, setEventStatus] = useState({\n    callStarted: false,\n    callEnded: false,\n    agentStartTalking: false,\n    agentStopTalking: false,\n    error: null,\n    transcript: ''\n  });\n  const [micPermission, setMicPermission] = useState(null);\n  const [accessToken, setAccessToken] = useState('');\n  const [isGeneratingToken, setIsGeneratingToken] = useState(false);\n  const [callInfo, setCallInfo] = useState(null);\n\n  // Agent ID for Retell\n  const AGENT_ID = \"agent_30b1b504a89d37e3109a7da3e9\";\n  \n  // Server endpoint for token generation\n  const TOKEN_SERVER_URL = \"http://127.0.0.1:5000/api/generate-token\";\n\n  useEffect(() => {\n    // Initialize the RetellWebClient\n    const client = new RetellWebClient();\n    setRetellWebClient(client);\n    \n    // Check for microphone permissions\n    checkMicrophonePermission();\n    \n    // Set up event listeners\n    client.on(\"call_started\", () => {\n      console.log(\"call started\");\n      setEventStatus(prev => ({ ...prev, callStarted: true, callEnded: false }));\n    });\n\n    client.on(\"call_ended\", () => {\n      console.log(\"call ended\");\n      setIsCallActive(false);\n      setEventStatus(prev => ({ ...prev, callEnded: true }));\n    });\n\n    client.on(\"agent_start_talking\", () => {\n      console.log(\"agent_start_talking\");\n      setEventStatus(prev => ({ ...prev, agentStartTalking: true, agentStopTalking: false }));\n    });\n\n    client.on(\"agent_stop_talking\", () => {\n      console.log(\"agent_stop_talking\");\n      setEventStatus(prev => ({ ...prev, agentStopTalking: true, agentStartTalking: false }));\n    });\n\n    client.on(\"update\", (update) => {\n      console.log(\"Update received:\", update);\n      if (update.transcript) {\n        setEventStatus(prev => ({ ...prev, transcript: update.transcript }));\n      }\n    });\n\n    client.on(\"metadata\", (metadata) => {\n      console.log(\"Metadata received:\", metadata);\n    });\n\n    client.on(\"error\", (error) => {\n      console.error(\"An error occurred:\", error);\n      setEventStatus(prev => ({ ...prev, error: error.message || \"Unknown error\" }));\n      client.stopCall();\n    });\n    \n    // Clean up event listeners on component unmount\n    return () => {\n      if (client) {\n        client.stopCall();\n      }\n    };\n  }, []);\n  \n  // Function to generate an access token from the server\n  const generateAccessToken = async () => {\n    try {\n      setIsGeneratingToken(true);\n      setEventStatus(prev => ({ ...prev, error: null }));\n      console.log(\"Requesting access token from server...\");\n      \n      // Make the API call to our server endpoint\n      const response = await fetch(TOKEN_SERVER_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          agent_id: AGENT_ID,\n        })\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || `Server responded with status: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (!data.access_token) {\n        throw new Error(\"No access token received from server\");\n      }\n      \n      console.log(\"Access token received from server:\", data.access_token);\n      setAccessToken(data.access_token);\n      setCallInfo(data); // Store the full call info for reference\n      setIsGeneratingToken(false);\n      \n      return data.access_token;\n    } catch (error) {\n      console.error(\"Failed to generate access token:\", error);\n      setEventStatus(prev => ({ ...prev, error: error.message || \"Failed to generate access token\" }));\n      setIsGeneratingToken(false);\n      return null;\n    }\n  };\n  \n  const checkMicrophonePermission = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      setMicPermission('granted');\n      // Stop the stream tracks immediately\n      stream.getTracks().forEach(track => track.stop());\n    } catch (error) {\n      console.error('Microphone permission denied:', error);\n      setMicPermission('denied');\n    }\n  };\n  \n  const requestMicrophonePermission = async () => {\n    try {\n      await navigator.mediaDevices.getUserMedia({ audio: true });\n      setMicPermission('granted');\n      return true;\n    } catch (error) {\n      console.error('Failed to get microphone permission:', error);\n      setMicPermission('denied');\n      return false;\n    }\n  };\n  \n  const startCall = async () => {\n    if (!retellWebClient || isCallActive) return;\n    \n    // First ensure we have microphone permissions\n    if (micPermission !== 'granted') {\n      const permissionGranted = await requestMicrophonePermission();\n      if (!permissionGranted) {\n        alert('Microphone permission is required to start a call');\n        return;\n      }\n    }\n    \n    try {\n      // Reset event status\n      setEventStatus({\n        callStarted: false,\n        callEnded: false,\n        agentStartTalking: false,\n        agentStopTalking: false,\n        error: null,\n        transcript: ''\n      });\n      \n      // Ensure we have a valid token\n      if (!accessToken) {\n        const token = await generateAccessToken();\n        if (!token) {\n          throw new Error(\"Failed to generate a valid access token\");\n        }\n      }\n      \n      console.log(\"Starting call with access token...\");\n      \n      // Start the call using the access token\n      await retellWebClient.startCall({\n        accessToken: accessToken,\n        sampleRate: 24000,\n        captureDeviceId: \"default\",\n        emitRawAudioSamples: false,\n      });\n      \n      setIsCallActive(true);\n    } catch (error) {\n      console.error(\"Failed to start call:\", error);\n      setEventStatus(prev => ({ ...prev, error: error.message || \"Failed to start call\" }));\n    }\n  };\n  \n  const stopCall = () => {\n    if (retellWebClient && isCallActive) {\n      retellWebClient.stopCall();\n      setIsCallActive(false);\n    }\n  };\n  \n  // Function to check if token is expired (tokens are valid for 30 seconds)\n  const isTokenExpired = () => {\n    // If we don't have token info, consider it expired\n    if (!accessToken || !callInfo) return true;\n    \n    // Track when we received the token in our application\n    if (!callInfo._tokenReceivedTime) {\n      // If this is the first time checking, add a timestamp of when we received it\n      callInfo._tokenReceivedTime = Date.now();\n      setCallInfo({...callInfo}); // Update the state to save this timestamp\n      return false; // Token is fresh\n    }\n    \n    // Calculate how long ago we received the token\n    const tokenReceivedTime = callInfo._tokenReceivedTime;\n    const currentTime = Date.now();\n    const tokenAgeInSeconds = (currentTime - tokenReceivedTime) / 1000;\n    \n    // Token expires after 30 seconds, but we consider it expired at 25s\n    // to give us a buffer to generate a new one\n    return tokenAgeInSeconds > 25;\n  };\n  \n  return (\n    <div className=\"App\" style={{ textAlign: 'center', padding: '20px', maxWidth: '800px', margin: '0 auto' }}>\n      <h1>Retell Voice Demo</h1>\n      \n      <div style={{ margin: '20px 0', padding: '10px', backgroundColor: '#f5f5f5', borderRadius: '4px' }}>\n        <h3>Microphone Permission: {micPermission === 'granted' ? '✅ Granted' : micPermission === 'denied' ? '❌ Denied' : '❓ Unknown'}</h3>\n        {micPermission !== 'granted' && (\n          <button \n            onClick={requestMicrophonePermission}\n            style={{ \n              padding: '8px 15px', \n              backgroundColor: '#2196F3',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer'\n            }}\n          >\n            Request Mic Permission\n          </button>\n        )}\n      </div>\n      \n      <div style={{ margin: '20px 0' }}>\n        <button \n          onClick={!accessToken || isTokenExpired() ? generateAccessToken : startCall} \n          disabled={isCallActive || isGeneratingToken}\n          style={{ \n            padding: '10px 20px', \n            margin: '0 10px', \n            backgroundColor: isCallActive || isGeneratingToken ? '#ccc' : '#4CAF50',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: isCallActive || isGeneratingToken ? 'default' : 'pointer'\n          }}\n        >\n          {!accessToken || isTokenExpired() ? \"Generate Token\" : isGeneratingToken ? \"Generating...\" : \"Start Call with Agent\"}\n        </button>\n        <button \n          onClick={stopCall} \n          disabled={!isCallActive}\n          style={{ \n            padding: '10px 20px', \n            margin: '0 10px',\n            backgroundColor: !isCallActive ? '#ccc' : '#f44336',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: !isCallActive ? 'default' : 'pointer'\n          }}\n        >\n          Stop Call\n        </button>\n      </div>\n      \n      <div style={{ margin: '20px 0', padding: '15px', border: '1px solid #ddd', borderRadius: '4px', textAlign: 'left' }}>\n        <h3>Call Status: {isCallActive ? '🟢 Active' : '🔴 Inactive'}</h3>\n        <div style={{ marginTop: '10px' }}>\n          <p><strong>Agent ID:</strong> {AGENT_ID}</p>\n          {accessToken && (\n            <div>\n              <p>\n                <strong>Access Token:</strong> {accessToken.substring(0, 8)}...\n                {accessToken.substring(accessToken.length-4)}\n                {isTokenExpired() && <span style={{color: 'red'}}> (Expired)</span>}\n              </p>\n              {callInfo && callInfo.call_id && (\n                <p><strong>Call ID:</strong> {callInfo.call_id}</p>\n              )}\n            </div>\n          )}\n        </div>\n        <div style={{ marginTop: '10px' }}>\n          <p><strong>Connection Info:</strong></p>\n          <ul style={{ listStyleType: 'none', padding: 0 }}>\n            <li>🔑 {accessToken ? \n              (isTokenExpired() ? \"Token expired (valid for 30 seconds)\" : \"Using valid access token\") \n              : \"No token generated yet\"}\n            </li>\n            <li>🔒 Token generated via server using Retell SDK</li>\n          </ul>\n        </div>\n        <div style={{ marginTop: '10px' }}>\n          <p><strong>Event Status:</strong></p>\n          <ul style={{ listStyleType: 'none', padding: 0 }}>\n            <li>🎤 Call Started: {eventStatus.callStarted ? '✅ Yes' : '❌ No'}</li>\n            <li>🛑 Call Ended: {eventStatus.callEnded ? '✅ Yes' : '❌ No'}</li>\n            <li>🗣️ Agent Talking: {eventStatus.agentStartTalking && !eventStatus.agentStopTalking ? '✅ Yes' : '❌ No'}</li>\n            {eventStatus.error && (\n              <li style={{ color: 'red', marginTop: '10px', padding: '5px', backgroundColor: '#ffebee', borderRadius: '4px' }}>\n                ⚠️ Error: {eventStatus.error}\n              </li>\n            )}\n          </ul>\n        </div>\n        {eventStatus.transcript && (\n          <div style={{ marginTop: '10px', maxHeight: '150px', overflowY: 'auto', padding: '10px', backgroundColor: '#f9f9f9', borderRadius: '4px' }}>\n            <p><strong>Latest Transcript:</strong></p>\n            <p style={{ whiteSpace: 'pre-line' }}>{eventStatus.transcript}</p>\n          </div>\n        )}\n      </div>\n      <div style={{ margin: '20px 0', fontSize: '12px', color: '#666' }}>\n        <p>Debug Info: Check console for detailed logs</p>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}