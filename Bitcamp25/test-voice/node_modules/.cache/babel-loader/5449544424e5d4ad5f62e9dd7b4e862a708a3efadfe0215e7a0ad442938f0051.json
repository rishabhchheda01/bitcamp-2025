{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kheri\\\\Downloads\\\\Bitcamp\\\\bitcamp-2025\\\\Bitcamp25\\\\test-voice\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { RetellWebClient } from \"retell-client-js-sdk\";\nimport SplineLoader from './SplineLoader';\nimport SplineViewer from './SplineViewer';\nimport './index.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  // Add a ref to maintain the Spline instance\n  const splineInstanceRef = useRef(null);\n  const cursorAnimationRef = useRef(null);\n  const [isCallActive, setIsCallActive] = useState(false);\n  const [retellWebClient, setRetellWebClient] = useState(null);\n  const [eventStatus, setEventStatus] = useState({\n    callStarted: false,\n    callEnded: false,\n    agentStartTalking: false,\n    agentStopTalking: false,\n    error: null,\n    transcript: ''\n  });\n  const [micPermission, setMicPermission] = useState(null);\n  const [accessToken, setAccessToken] = useState('');\n  const [isGeneratingToken, setIsGeneratingToken] = useState(false);\n  const [callInfo, setCallInfo] = useState(null);\n  const [loadingComplete, setLoadingComplete] = useState(false);\n  const [showUI, setShowUI] = useState(true);\n  // Add state to control the mounting/unmounting of Spline\n  const [splineInitialized, setSplineInitialized] = useState(false);\n  const [cursorPosition, setCursorPosition] = useState({\n    x: window.innerWidth / 2,\n    y: window.innerHeight / 2\n  });\n  const [isCursorControlled, setIsCursorControlled] = useState(false);\n  const [realCursorPosition, setRealCursorPosition] = useState({\n    x: window.innerWidth / 2,\n    y: window.innerHeight / 2\n  });\n  const [isUserMovingCursor, setIsUserMovingCursor] = useState(false);\n  const userCursorTimeoutRef = useRef(null);\n\n  // Agent ID for Retell\n  const AGENT_ID = \"agent_30b1b504a89d37e3109a7da3e9\";\n\n  // Server endpoint for token generation\n  const TOKEN_SERVER_URL = \"http://127.0.0.1:5000/api/generate-token\";\n\n  // Track real user cursor movements\n  useEffect(() => {\n    const handleMouseMove = event => {\n      const {\n        clientX,\n        clientY\n      } = event;\n      setRealCursorPosition({\n        x: clientX,\n        y: clientY\n      });\n\n      // When user moves cursor, use real position and stop simulated movement temporarily\n      if (isCursorControlled) {\n        setIsUserMovingCursor(true);\n        setCursorPosition({\n          x: clientX,\n          y: clientY\n        });\n\n        // Make real cursor visible when user moves it\n        document.body.classList.remove('cursor-controlled');\n\n        // Clear any existing timeout\n        if (userCursorTimeoutRef.current) {\n          clearTimeout(userCursorTimeoutRef.current);\n        }\n\n        // Set a timeout to return to simulated movement and hide cursor again\n        userCursorTimeoutRef.current = setTimeout(() => {\n          setIsUserMovingCursor(false);\n          document.body.classList.add('cursor-controlled');\n        }, 2000); // Show cursor for 2 seconds as requested\n      }\n    };\n    window.addEventListener('mousemove', handleMouseMove);\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      if (userCursorTimeoutRef.current) {\n        clearTimeout(userCursorTimeoutRef.current);\n      }\n    };\n  }, [isCursorControlled]);\n\n  // Control cursor movement via Spline - Direct event dispatch approach\n  useEffect(() => {\n    // Target the spline-viewer element directly\n    const splineElement = document.querySelector('spline-viewer');\n    if (splineElement) {\n      try {\n        // Create a synthetic MouseEvent to directly control where Spline \"thinks\" the cursor is\n        const mouseEvent = new MouseEvent('mousemove', {\n          bubbles: true,\n          cancelable: true,\n          view: window,\n          clientX: cursorPosition.x,\n          clientY: cursorPosition.y\n        });\n\n        // Dispatch the mouse event directly on the spline-viewer element\n        splineElement.dispatchEvent(mouseEvent);\n\n        // Also try dispatching on the document for broader effect\n        document.dispatchEvent(new MouseEvent('mousemove', {\n          bubbles: true,\n          cancelable: true,\n          view: window,\n          clientX: cursorPosition.x,\n          clientY: cursorPosition.y\n        }));\n\n        // Update the debug cursor for visibility\n        let debugCursor = document.getElementById('debug-cursor');\n        if (debugCursor) {\n          debugCursor.style.left = `${cursorPosition.x - 10}px`;\n          debugCursor.style.top = `${cursorPosition.y - 10}px`;\n        } else {\n          // Create debug cursor if it doesn't exist\n          debugCursor = document.createElement('div');\n          debugCursor.id = 'debug-cursor';\n          debugCursor.style.position = 'absolute';\n          debugCursor.style.width = '20px';\n          debugCursor.style.height = '20px';\n          debugCursor.style.borderRadius = '50%';\n          debugCursor.style.backgroundColor = 'rgba(255, 0, 0, 0.5)';\n          debugCursor.style.zIndex = '10000';\n          debugCursor.style.pointerEvents = 'none';\n          debugCursor.style.left = `${cursorPosition.x - 10}px`;\n          debugCursor.style.top = `${cursorPosition.y - 10}px`;\n          document.body.appendChild(debugCursor);\n        }\n      } catch (error) {\n        console.error('Error moving cursor:', error);\n      }\n    }\n  }, [cursorPosition]);\n\n  // Manual testing function to simulate cursor movement\n  const simulateMovement = () => {\n    console.log(\"Starting cursor movement animation\");\n\n    // Cancel any existing animation\n    if (cursorAnimationRef.current) {\n      cancelAnimationFrame(cursorAnimationRef.current);\n    }\n\n    // Create a visible debug cursor\n    let debugCursor = document.getElementById('debug-cursor');\n    if (!debugCursor) {\n      debugCursor = document.createElement('div');\n      debugCursor.id = 'debug-cursor';\n      debugCursor.style.position = 'absolute';\n      debugCursor.style.width = '20px';\n      debugCursor.style.height = '20px';\n      debugCursor.style.borderRadius = '50%';\n      debugCursor.style.backgroundColor = 'rgba(255, 0, 0, 0.5)';\n      debugCursor.style.zIndex = '10000';\n      debugCursor.style.pointerEvents = 'none';\n      document.body.appendChild(debugCursor);\n    }\n    let time = 0;\n    const duration = 3000;\n\n    // Even larger movements and faster speeds for maximum visibility\n    const randomAmplitude = {\n      nod: 400 + Math.random() * 300,\n      // Extreme movement\n      shake: 500 + Math.random() * 400,\n      // Super large\n      circleX: 500 + Math.random() * 400,\n      circleY: 400 + Math.random() * 300\n    };\n    const randomSpeed = {\n      nod: 18 + Math.random() * 12,\n      // Very fast speeds\n      shake: 12 + Math.random() * 10,\n      circle: 10 + Math.random() * 6\n    };\n    const startX = window.innerWidth / 2;\n    const startY = window.innerHeight / 2;\n    let currentPattern = Math.floor(Math.random() * 3);\n    let patternDuration = 0;\n    let maxPatternDuration = Math.random() * 600 + 200; // Shorter durations for more variety\n\n    const animate = () => {\n      // Don't continue if user is moving cursor\n      if (isUserMovingCursor) {\n        cursorAnimationRef.current = requestAnimationFrame(animate);\n        return;\n      }\n      time += 16;\n      patternDuration += 16;\n      if (time > duration) {\n        time = 0;\n      }\n      if (patternDuration > maxPatternDuration) {\n        currentPattern = Math.floor(Math.random() * 3);\n        patternDuration = 0;\n        maxPatternDuration = Math.random() * 600 + 200;\n      }\n      const progress = time / duration;\n      const noddingPattern = Math.sin(progress * Math.PI * randomSpeed.nod) * randomAmplitude.nod;\n      const shakingPattern = Math.sin(progress * Math.PI * randomSpeed.shake) * randomAmplitude.shake;\n      const circlePattern = {\n        x: Math.cos(progress * Math.PI * randomSpeed.circle) * randomAmplitude.circleX,\n        y: Math.sin(progress * Math.PI * randomSpeed.circle) * randomAmplitude.circleY\n      };\n      let x, y;\n      const jitter = {\n        x: (Math.random() - 0.5) * 100,\n        // Extreme jitter\n        y: (Math.random() - 0.5) * 100\n      };\n      switch (currentPattern) {\n        case 0:\n          x = startX + jitter.x;\n          y = startY + noddingPattern + jitter.y;\n          break;\n        case 1:\n          x = startX + shakingPattern + jitter.x;\n          y = startY + jitter.y;\n          break;\n        case 2:\n          x = startX + circlePattern.x + jitter.x;\n          y = startY + circlePattern.y + jitter.y;\n          break;\n        default:\n          x = startX;\n          y = startY;\n      }\n      if (Math.random() < 0.04) {\n        // Even more frequent jumps\n        x += (Math.random() - 0.5) * 1000; // Massive jumps\n        y += (Math.random() - 0.5) * 1000;\n      }\n\n      // Keep within viewport\n      const padding = 50;\n      x = Math.max(padding, Math.min(window.innerWidth - padding, x));\n      y = Math.max(padding, Math.min(window.innerHeight - padding, y));\n\n      // Update the debug cursor first for immediate visual feedback\n      if (debugCursor) {\n        debugCursor.style.left = `${x - 10}px`;\n        debugCursor.style.top = `${y - 10}px`;\n      }\n\n      // Update cursor position state \n      setCursorPosition({\n        x,\n        y\n      });\n\n      // DIRECT DOM MANIPULATION: Move the cursor for the Spline model\n      // This is the most reliable method to force the Spline to track our cursor\n      const splineElement = document.querySelector('spline-viewer');\n      if (splineElement) {\n        try {\n          // Create and dispatch a mousemove event directly on the spline element\n          const event = new MouseEvent('mousemove', {\n            bubbles: true,\n            cancelable: true,\n            view: window,\n            clientX: x,\n            clientY: y\n          });\n          splineElement.dispatchEvent(event);\n\n          // Also dispatch at document level for maximum effect\n          document.dispatchEvent(new MouseEvent('mousemove', {\n            bubbles: true,\n            cancelable: true,\n            view: window,\n            clientX: x,\n            clientY: y\n          }));\n        } catch (error) {\n          console.error('Error dispatching mouse event:', error);\n        }\n      }\n      cursorAnimationRef.current = requestAnimationFrame(animate);\n    };\n\n    // Start the animation loop\n    cursorAnimationRef.current = requestAnimationFrame(animate);\n  };\n\n  // Clean up function to remove debug elements\n  const cleanupDebugElements = () => {\n    const debugCursor = document.getElementById('debug-cursor');\n    if (debugCursor) {\n      document.body.removeChild(debugCursor);\n    }\n\n    // Remove cursor-controlled class from body\n    document.body.classList.remove('cursor-controlled');\n  };\n\n  // Animation start handler that properly sets up cursor control\n  const startCursorAnimation = () => {\n    console.log(\"Starting cursor animation for agent talking\");\n\n    // Hide the system cursor\n    document.body.classList.add('cursor-controlled');\n    setIsCursorControlled(true);\n\n    // Call the animation function\n    simulateMovement();\n  };\n\n  // Animation stop handler that properly cleans up cursor control\n  const stopCursorAnimation = () => {\n    console.log(\"Stopping cursor animation\");\n\n    // Cancel the animation frame\n    if (cursorAnimationRef.current) {\n      cancelAnimationFrame(cursorAnimationRef.current);\n      cursorAnimationRef.current = null;\n    }\n\n    // Show the system cursor again\n    document.body.classList.remove('cursor-controlled');\n    setIsCursorControlled(false);\n  };\n  useEffect(() => {\n    // Initialize the RetellWebClient\n    const client = new RetellWebClient();\n    setRetellWebClient(client);\n\n    // Check for microphone permissions\n    checkMicrophonePermission();\n\n    // Set up event listeners\n    client.on(\"call_started\", () => {\n      console.log(\"call started\");\n      setEventStatus(prev => ({\n        ...prev,\n        callStarted: true,\n        callEnded: false\n      }));\n    });\n    client.on(\"call_ended\", () => {\n      console.log(\"call ended\");\n      setIsCallActive(false);\n      setEventStatus(prev => ({\n        ...prev,\n        callEnded: true\n      }));\n      // Stop cursor animation when call ends\n      stopCursorAnimation();\n      // Clean up any debug elements\n      cleanupDebugElements();\n    });\n    client.on(\"agent_start_talking\", () => {\n      console.log(\"agent_start_talking - STARTING CURSOR ANIMATION\");\n      setEventStatus(prev => ({\n        ...prev,\n        agentStartTalking: true,\n        agentStopTalking: false\n      }));\n\n      // Start cursor animation with proper cursor control\n      startCursorAnimation();\n    });\n    client.on(\"agent_stop_talking\", () => {\n      console.log(\"agent_stop_talking - STOPPING CURSOR ANIMATION\");\n      setEventStatus(prev => ({\n        ...prev,\n        agentStopTalking: true,\n        agentStartTalking: false\n      }));\n      // Stop cursor animation when agent stops talking\n      stopCursorAnimation();\n    });\n    client.on(\"update\", update => {\n      console.log(\"Update received:\", update);\n      if (update.transcript) {\n        // Check if transcript is an object with role and content properties\n        if (typeof update.transcript === 'object' && update.transcript.role && update.transcript.content) {\n          // Extract the content text\n          setEventStatus(prev => ({\n            ...prev,\n            transcript: update.transcript.content\n          }));\n        }\n        // Check if transcript is an array of message objects\n        else if (Array.isArray(update.transcript)) {\n          // Map through messages and format them\n          const formattedTranscript = update.transcript.map(msg => {\n            if (typeof msg === 'object' && msg.role && msg.content) {\n              return `${msg.role}: ${msg.content}`;\n            }\n            return String(msg); // Convert to string if it's some other type\n          }).join('\\n');\n          setEventStatus(prev => ({\n            ...prev,\n            transcript: formattedTranscript\n          }));\n        }\n        // If it's a string or can be converted to string\n        else {\n          setEventStatus(prev => ({\n            ...prev,\n            transcript: String(update.transcript)\n          }));\n        }\n      }\n    });\n    client.on(\"metadata\", metadata => {\n      console.log(\"Metadata received:\", metadata);\n    });\n    client.on(\"error\", error => {\n      console.error(\"An error occurred:\", error);\n      setEventStatus(prev => ({\n        ...prev,\n        error: error.message || \"Unknown error\"\n      }));\n      client.stopCall();\n    });\n\n    // Clean up event listeners on component unmount\n    return () => {\n      if (client) {\n        client.stopCall();\n      }\n\n      // Clean up animation and show cursor\n      stopCursorAnimation();\n      document.body.classList.remove('cursor-controlled');\n\n      // Remove debug elements\n      cleanupDebugElements();\n    };\n  }, []);\n\n  // Function to generate an access token from the server\n  const generateAccessToken = async () => {\n    try {\n      setIsGeneratingToken(true);\n      setEventStatus(prev => ({\n        ...prev,\n        error: null\n      }));\n      console.log(\"Requesting access token from server...\");\n\n      // Make the API call to our server endpoint\n      const response = await fetch(TOKEN_SERVER_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          agent_id: AGENT_ID\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || `Server responded with status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (!data.access_token) {\n        throw new Error(\"No access token received from server\");\n      }\n      console.log(\"Access token received from server:\", data.access_token);\n      setAccessToken(data.access_token);\n      setCallInfo(data); // Store the full call info for reference\n      setIsGeneratingToken(false);\n      return data.access_token;\n    } catch (error) {\n      console.error(\"Failed to generate access token:\", error);\n      setEventStatus(prev => ({\n        ...prev,\n        error: error.message || \"Failed to generate access token\"\n      }));\n      setIsGeneratingToken(false);\n      return null;\n    }\n  };\n  const checkMicrophonePermission = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      setMicPermission('granted');\n      // Stop the stream tracks immediately\n      stream.getTracks().forEach(track => track.stop());\n    } catch (error) {\n      console.error('Microphone permission denied:', error);\n      setMicPermission('denied');\n    }\n  };\n  const requestMicrophonePermission = async () => {\n    try {\n      await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      setMicPermission('granted');\n      return true;\n    } catch (error) {\n      console.error('Failed to get microphone permission:', error);\n      setMicPermission('denied');\n      return false;\n    }\n  };\n  const startCall = async () => {\n    if (!retellWebClient || isCallActive) return;\n\n    // First ensure we have microphone permissions\n    if (micPermission !== 'granted') {\n      const permissionGranted = await requestMicrophonePermission();\n      if (!permissionGranted) {\n        alert('Microphone permission is required to start a call');\n        return;\n      }\n    }\n    try {\n      // Reset event status\n      setEventStatus({\n        callStarted: false,\n        callEnded: false,\n        agentStartTalking: false,\n        agentStopTalking: false,\n        error: null,\n        transcript: ''\n      });\n\n      // Ensure we have a valid token\n      if (!accessToken) {\n        const token = await generateAccessToken();\n        if (!token) {\n          throw new Error(\"Failed to generate a valid access token\");\n        }\n      }\n      console.log(\"Starting call with access token...\");\n\n      // Start the call using the access token\n      await retellWebClient.startCall({\n        accessToken: accessToken,\n        sampleRate: 24000,\n        captureDeviceId: \"default\",\n        emitRawAudioSamples: false\n      });\n      setIsCallActive(true);\n    } catch (error) {\n      console.error(\"Failed to start call:\", error);\n      setEventStatus(prev => ({\n        ...prev,\n        error: error.message || \"Failed to start call\"\n      }));\n    }\n  };\n  const stopCall = () => {\n    if (retellWebClient && isCallActive) {\n      retellWebClient.stopCall();\n      setIsCallActive(false);\n    }\n  };\n\n  // Function to check if token is expired (tokens are valid for 30 seconds)\n  const isTokenExpired = () => {\n    // If we don't have token info, consider it expired\n    if (!accessToken || !callInfo) return true;\n\n    // Track when we received the token in our application\n    if (!callInfo._tokenReceivedTime) {\n      // If this is the first time checking, add a timestamp of when we received it\n      callInfo._tokenReceivedTime = Date.now();\n      setCallInfo({\n        ...callInfo\n      }); // Update the state to save this timestamp\n      return false; // Token is fresh\n    }\n\n    // Calculate how long ago we received the token\n    const tokenReceivedTime = callInfo._tokenReceivedTime;\n    const currentTime = Date.now();\n    const tokenAgeInSeconds = (currentTime - tokenReceivedTime) / 1000;\n\n    // Token expires after 30 seconds, but we consider it expired at 25s\n    // to give us a buffer to generate a new one\n    return tokenAgeInSeconds > 25;\n  };\n\n  // New function to handle loading completion and initialize Spline only once\n  const handleLoadingComplete = () => {\n    setLoadingComplete(true);\n    setSplineInitialized(true);\n  };\n\n  // For test purposes, update the test button click handler\n  const testCursorMovement = () => {\n    console.log(\"Testing cursor movement\");\n    startCursorAnimation();\n  };\n\n  // Component cleanup for debug elements\n  useEffect(() => {\n    return () => {\n      console.log(\"Cleaning up cursor animations and debug elements\");\n      if (cursorAnimationRef.current) {\n        cancelAnimationFrame(cursorAnimationRef.current);\n      }\n\n      // Remove all debug elements\n      const virtualCursor = document.getElementById('virtual-cursor');\n      if (virtualCursor) document.body.removeChild(virtualCursor);\n      const debugCursor = document.getElementById('debug-cursor');\n      if (debugCursor) document.body.removeChild(debugCursor);\n    };\n  }, []);\n\n  // Add special handler for when page visibility changes\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        // Page is hidden, stop animations\n        if (cursorAnimationRef.current) {\n          cancelAnimationFrame(cursorAnimationRef.current);\n          setIsCursorControlled(false);\n        }\n      } else {\n        // Page is visible again, restart animation if agent is talking\n        if (eventStatus.agentStartTalking && !eventStatus.agentStopTalking && isCallActive) {\n          startCursorAnimation();\n        }\n      }\n    };\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [eventStatus.agentStartTalking, eventStatus.agentStopTalking, isCallActive]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `App ${isCursorControlled && !isUserMovingCursor ? 'cursor-controlled' : ''}`,\n    children: !loadingComplete ? /*#__PURE__*/_jsxDEV(SplineLoader, {\n      onLoadingComplete: handleLoadingComplete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 618,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spline-container\",\n        children: [splineInitialized && /*#__PURE__*/_jsxDEV(SplineViewer, {\n          ref: splineInstanceRef,\n          url: \"https://prod.spline.design/8CIsvX5hg8u-JUKM/scene.splinecode\",\n          options: {\n            hint: true,\n            'loading-anim-type': 'spinner-small-dark'\n          },\n          persistOnUpdate: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: testCursorMovement,\n          style: {\n            position: 'absolute',\n            top: '10px',\n            left: '10px',\n            zIndex: 100,\n            background: 'rgba(0,0,0,0.5)',\n            color: 'white',\n            border: 'none',\n            padding: '5px 10px',\n            cursor: 'pointer'\n          },\n          children: \"Test Eyes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 637,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `sidebar ${showUI ? 'open' : 'closed'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"toggle-ui\",\n          onClick: () => setShowUI(!showUI),\n          children: showUI ? '×' : '≡'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"AI Voice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 662,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"status-indicator\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `status-dot ${isCallActive ? 'active' : 'inactive'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 665,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: isCallActive ? 'Connected' : 'Disconnected'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 666,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 664,\n            columnNumber: 15\n          }, this), micPermission !== 'granted' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: requestMicrophonePermission,\n            className: \"btn-secondary btn-small\",\n            children: \"Enable Mic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"control-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: !accessToken || isTokenExpired() ? generateAccessToken : startCall,\n              disabled: isCallActive || isGeneratingToken,\n              className: \"btn-primary\",\n              children: !accessToken || isTokenExpired() ? \"Connect\" : isGeneratingToken ? \"...\" : \"Start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 17\n            }, this), isCallActive && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: stopCall,\n              className: \"btn-danger\",\n              children: \"End\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 692,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 678,\n            columnNumber: 15\n          }, this), eventStatus.error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-badge\",\n            children: [\"Error: \", eventStatus.error]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 17\n          }, this), isCallActive && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"talking-indicator\",\n            children: eventStatus.agentStartTalking && !eventStatus.agentStopTalking ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"wave-animation\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wave\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wave\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 713,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wave\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 714,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wave\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 715,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 21\n            }, this) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 17\n          }, this), eventStatus.transcript && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-transcript\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                whiteSpace: 'pre-line'\n              },\n              children: eventStatus.transcript\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 616,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"QMskvXVLnsLKIFk+FrTzzE31zqs=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","RetellWebClient","SplineLoader","SplineViewer","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","splineInstanceRef","cursorAnimationRef","isCallActive","setIsCallActive","retellWebClient","setRetellWebClient","eventStatus","setEventStatus","callStarted","callEnded","agentStartTalking","agentStopTalking","error","transcript","micPermission","setMicPermission","accessToken","setAccessToken","isGeneratingToken","setIsGeneratingToken","callInfo","setCallInfo","loadingComplete","setLoadingComplete","showUI","setShowUI","splineInitialized","setSplineInitialized","cursorPosition","setCursorPosition","x","window","innerWidth","y","innerHeight","isCursorControlled","setIsCursorControlled","realCursorPosition","setRealCursorPosition","isUserMovingCursor","setIsUserMovingCursor","userCursorTimeoutRef","AGENT_ID","TOKEN_SERVER_URL","handleMouseMove","event","clientX","clientY","document","body","classList","remove","current","clearTimeout","setTimeout","add","addEventListener","removeEventListener","splineElement","querySelector","mouseEvent","MouseEvent","bubbles","cancelable","view","dispatchEvent","debugCursor","getElementById","style","left","top","createElement","id","position","width","height","borderRadius","backgroundColor","zIndex","pointerEvents","appendChild","console","simulateMovement","log","cancelAnimationFrame","time","duration","randomAmplitude","nod","Math","random","shake","circleX","circleY","randomSpeed","circle","startX","startY","currentPattern","floor","patternDuration","maxPatternDuration","animate","requestAnimationFrame","progress","noddingPattern","sin","PI","shakingPattern","circlePattern","cos","jitter","padding","max","min","cleanupDebugElements","removeChild","startCursorAnimation","stopCursorAnimation","client","checkMicrophonePermission","on","prev","update","role","content","Array","isArray","formattedTranscript","map","msg","String","join","metadata","message","stopCall","generateAccessToken","response","fetch","method","headers","JSON","stringify","agent_id","ok","errorData","json","Error","status","data","access_token","stream","navigator","mediaDevices","getUserMedia","audio","getTracks","forEach","track","stop","requestMicrophonePermission","startCall","permissionGranted","alert","token","sampleRate","captureDeviceId","emitRawAudioSamples","isTokenExpired","_tokenReceivedTime","Date","now","tokenReceivedTime","currentTime","tokenAgeInSeconds","handleLoadingComplete","testCursorMovement","virtualCursor","handleVisibilityChange","hidden","className","children","onLoadingComplete","fileName","_jsxFileName","lineNumber","columnNumber","ref","url","options","hint","persistOnUpdate","onClick","background","color","border","cursor","disabled","whiteSpace","_c","$RefreshReg$"],"sources":["C:/Users/kheri/Downloads/Bitcamp/bitcamp-2025/Bitcamp25/test-voice/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { RetellWebClient } from \"retell-client-js-sdk\";\nimport SplineLoader from './SplineLoader';\nimport SplineViewer from './SplineViewer';\nimport './index.css';\n\nfunction App() {\n  // Add a ref to maintain the Spline instance\n  const splineInstanceRef = useRef(null);\n  const cursorAnimationRef = useRef(null);\n  const [isCallActive, setIsCallActive] = useState(false);\n  const [retellWebClient, setRetellWebClient] = useState(null);\n  const [eventStatus, setEventStatus] = useState({\n    callStarted: false,\n    callEnded: false,\n    agentStartTalking: false,\n    agentStopTalking: false,\n    error: null,\n    transcript: ''\n  });\n  const [micPermission, setMicPermission] = useState(null);\n  const [accessToken, setAccessToken] = useState('');\n  const [isGeneratingToken, setIsGeneratingToken] = useState(false);\n  const [callInfo, setCallInfo] = useState(null);\n  const [loadingComplete, setLoadingComplete] = useState(false);\n  const [showUI, setShowUI] = useState(true);\n  // Add state to control the mounting/unmounting of Spline\n  const [splineInitialized, setSplineInitialized] = useState(false);\n  const [cursorPosition, setCursorPosition] = useState({ x: window.innerWidth / 2, y: window.innerHeight / 2 });\n  const [isCursorControlled, setIsCursorControlled] = useState(false);\n  const [realCursorPosition, setRealCursorPosition] = useState({ x: window.innerWidth / 2, y: window.innerHeight / 2 });\n  const [isUserMovingCursor, setIsUserMovingCursor] = useState(false);\n  const userCursorTimeoutRef = useRef(null);\n\n  // Agent ID for Retell\n  const AGENT_ID = \"agent_30b1b504a89d37e3109a7da3e9\";\n  \n  // Server endpoint for token generation\n  const TOKEN_SERVER_URL = \"http://127.0.0.1:5000/api/generate-token\";\n\n  // Track real user cursor movements\n  useEffect(() => {\n    const handleMouseMove = (event) => {\n      const { clientX, clientY } = event;\n      setRealCursorPosition({ x: clientX, y: clientY });\n      \n      // When user moves cursor, use real position and stop simulated movement temporarily\n      if (isCursorControlled) {\n        setIsUserMovingCursor(true);\n        setCursorPosition({ x: clientX, y: clientY });\n        \n        // Make real cursor visible when user moves it\n        document.body.classList.remove('cursor-controlled');\n        \n        // Clear any existing timeout\n        if (userCursorTimeoutRef.current) {\n          clearTimeout(userCursorTimeoutRef.current);\n        }\n        \n        // Set a timeout to return to simulated movement and hide cursor again\n        userCursorTimeoutRef.current = setTimeout(() => {\n          setIsUserMovingCursor(false);\n          document.body.classList.add('cursor-controlled');\n        }, 2000); // Show cursor for 2 seconds as requested\n      }\n    };\n    \n    window.addEventListener('mousemove', handleMouseMove);\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove);\n      if (userCursorTimeoutRef.current) {\n        clearTimeout(userCursorTimeoutRef.current);\n      }\n    };\n  }, [isCursorControlled]);\n\n  // Control cursor movement via Spline - Direct event dispatch approach\n  useEffect(() => {\n    // Target the spline-viewer element directly\n    const splineElement = document.querySelector('spline-viewer');\n    if (splineElement) {\n      try {\n        // Create a synthetic MouseEvent to directly control where Spline \"thinks\" the cursor is\n        const mouseEvent = new MouseEvent('mousemove', {\n          bubbles: true,\n          cancelable: true,\n          view: window,\n          clientX: cursorPosition.x,\n          clientY: cursorPosition.y\n        });\n        \n        // Dispatch the mouse event directly on the spline-viewer element\n        splineElement.dispatchEvent(mouseEvent);\n        \n        // Also try dispatching on the document for broader effect\n        document.dispatchEvent(\n          new MouseEvent('mousemove', {\n            bubbles: true,\n            cancelable: true,\n            view: window,\n            clientX: cursorPosition.x,\n            clientY: cursorPosition.y\n          })\n        );\n        \n        // Update the debug cursor for visibility\n        let debugCursor = document.getElementById('debug-cursor');\n        if (debugCursor) {\n          debugCursor.style.left = `${cursorPosition.x - 10}px`;\n          debugCursor.style.top = `${cursorPosition.y - 10}px`;\n        } else {\n          // Create debug cursor if it doesn't exist\n          debugCursor = document.createElement('div');\n          debugCursor.id = 'debug-cursor';\n          debugCursor.style.position = 'absolute';\n          debugCursor.style.width = '20px';\n          debugCursor.style.height = '20px';\n          debugCursor.style.borderRadius = '50%';\n          debugCursor.style.backgroundColor = 'rgba(255, 0, 0, 0.5)';\n          debugCursor.style.zIndex = '10000';\n          debugCursor.style.pointerEvents = 'none';\n          debugCursor.style.left = `${cursorPosition.x - 10}px`;\n          debugCursor.style.top = `${cursorPosition.y - 10}px`;\n          document.body.appendChild(debugCursor);\n        }\n      } catch (error) {\n        console.error('Error moving cursor:', error);\n      }\n    }\n  }, [cursorPosition]);\n\n  // Manual testing function to simulate cursor movement\n  const simulateMovement = () => {\n    console.log(\"Starting cursor movement animation\");\n    \n    // Cancel any existing animation\n    if (cursorAnimationRef.current) {\n      cancelAnimationFrame(cursorAnimationRef.current);\n    }\n\n    // Create a visible debug cursor\n    let debugCursor = document.getElementById('debug-cursor');\n    if (!debugCursor) {\n      debugCursor = document.createElement('div');\n      debugCursor.id = 'debug-cursor';\n      debugCursor.style.position = 'absolute';\n      debugCursor.style.width = '20px';\n      debugCursor.style.height = '20px';\n      debugCursor.style.borderRadius = '50%';\n      debugCursor.style.backgroundColor = 'rgba(255, 0, 0, 0.5)';\n      debugCursor.style.zIndex = '10000';\n      debugCursor.style.pointerEvents = 'none';\n      document.body.appendChild(debugCursor);\n    }\n\n    let time = 0;\n    const duration = 3000;\n    \n    // Even larger movements and faster speeds for maximum visibility\n    const randomAmplitude = {\n      nod: 400 + Math.random() * 300,     // Extreme movement\n      shake: 500 + Math.random() * 400,    // Super large\n      circleX: 500 + Math.random() * 400,\n      circleY: 400 + Math.random() * 300\n    };\n    \n    const randomSpeed = {\n      nod: 18 + Math.random() * 12,       // Very fast speeds\n      shake: 12 + Math.random() * 10,\n      circle: 10 + Math.random() * 6\n    };\n    \n    const startX = window.innerWidth / 2;\n    const startY = window.innerHeight / 2;\n    \n    let currentPattern = Math.floor(Math.random() * 3);\n    let patternDuration = 0;\n    let maxPatternDuration = Math.random() * 600 + 200; // Shorter durations for more variety\n    \n    const animate = () => {\n      // Don't continue if user is moving cursor\n      if (isUserMovingCursor) {\n        cursorAnimationRef.current = requestAnimationFrame(animate);\n        return;\n      }\n      \n      time += 16;\n      patternDuration += 16;\n      \n      if (time > duration) {\n        time = 0;\n      }\n      \n      if (patternDuration > maxPatternDuration) {\n        currentPattern = Math.floor(Math.random() * 3);\n        patternDuration = 0;\n        maxPatternDuration = Math.random() * 600 + 200;\n      }\n\n      const progress = time / duration;\n      \n      const noddingPattern = Math.sin(progress * Math.PI * randomSpeed.nod) * randomAmplitude.nod;\n      const shakingPattern = Math.sin(progress * Math.PI * randomSpeed.shake) * randomAmplitude.shake;\n      const circlePattern = {\n        x: Math.cos(progress * Math.PI * randomSpeed.circle) * randomAmplitude.circleX,\n        y: Math.sin(progress * Math.PI * randomSpeed.circle) * randomAmplitude.circleY\n      };\n      \n      let x, y;\n      \n      const jitter = {\n        x: (Math.random() - 0.5) * 100,  // Extreme jitter\n        y: (Math.random() - 0.5) * 100\n      };\n      \n      switch(currentPattern) {\n        case 0:\n          x = startX + jitter.x;\n          y = startY + noddingPattern + jitter.y;\n          break;\n        case 1:\n          x = startX + shakingPattern + jitter.x;\n          y = startY + jitter.y;\n          break;\n        case 2:\n          x = startX + circlePattern.x + jitter.x;\n          y = startY + circlePattern.y + jitter.y;\n          break;\n        default:\n          x = startX;\n          y = startY;\n      }\n      \n      if (Math.random() < 0.04) { // Even more frequent jumps\n        x += (Math.random() - 0.5) * 1000;  // Massive jumps\n        y += (Math.random() - 0.5) * 1000;\n      }\n      \n      // Keep within viewport\n      const padding = 50;\n      x = Math.max(padding, Math.min(window.innerWidth - padding, x));\n      y = Math.max(padding, Math.min(window.innerHeight - padding, y));\n      \n      // Update the debug cursor first for immediate visual feedback\n      if (debugCursor) {\n        debugCursor.style.left = `${x - 10}px`;\n        debugCursor.style.top = `${y - 10}px`;\n      }\n      \n      // Update cursor position state \n      setCursorPosition({ x, y });\n      \n      // DIRECT DOM MANIPULATION: Move the cursor for the Spline model\n      // This is the most reliable method to force the Spline to track our cursor\n      const splineElement = document.querySelector('spline-viewer');\n      if (splineElement) {\n        try {\n          // Create and dispatch a mousemove event directly on the spline element\n          const event = new MouseEvent('mousemove', {\n            bubbles: true,\n            cancelable: true,\n            view: window,\n            clientX: x,\n            clientY: y\n          });\n          splineElement.dispatchEvent(event);\n          \n          // Also dispatch at document level for maximum effect\n          document.dispatchEvent(new MouseEvent('mousemove', {\n            bubbles: true,\n            cancelable: true,\n            view: window,\n            clientX: x,\n            clientY: y\n          }));\n        } catch (error) {\n          console.error('Error dispatching mouse event:', error);\n        }\n      }\n      \n      cursorAnimationRef.current = requestAnimationFrame(animate);\n    };\n    \n    // Start the animation loop\n    cursorAnimationRef.current = requestAnimationFrame(animate);\n  };\n\n  // Clean up function to remove debug elements\n  const cleanupDebugElements = () => {\n    const debugCursor = document.getElementById('debug-cursor');\n    if (debugCursor) {\n      document.body.removeChild(debugCursor);\n    }\n    \n    // Remove cursor-controlled class from body\n    document.body.classList.remove('cursor-controlled');\n  };\n\n  // Animation start handler that properly sets up cursor control\n  const startCursorAnimation = () => {\n    console.log(\"Starting cursor animation for agent talking\");\n    \n    // Hide the system cursor\n    document.body.classList.add('cursor-controlled');\n    setIsCursorControlled(true);\n    \n    // Call the animation function\n    simulateMovement();\n  };\n\n  // Animation stop handler that properly cleans up cursor control\n  const stopCursorAnimation = () => {\n    console.log(\"Stopping cursor animation\");\n    \n    // Cancel the animation frame\n    if (cursorAnimationRef.current) {\n      cancelAnimationFrame(cursorAnimationRef.current);\n      cursorAnimationRef.current = null;\n    }\n    \n    // Show the system cursor again\n    document.body.classList.remove('cursor-controlled');\n    setIsCursorControlled(false);\n  };\n\n  useEffect(() => {\n    // Initialize the RetellWebClient\n    const client = new RetellWebClient();\n    setRetellWebClient(client);\n    \n    // Check for microphone permissions\n    checkMicrophonePermission();\n    \n    // Set up event listeners\n    client.on(\"call_started\", () => {\n      console.log(\"call started\");\n      setEventStatus(prev => ({ ...prev, callStarted: true, callEnded: false }));\n    });\n\n    client.on(\"call_ended\", () => {\n      console.log(\"call ended\");\n      setIsCallActive(false);\n      setEventStatus(prev => ({ ...prev, callEnded: true }));\n      // Stop cursor animation when call ends\n      stopCursorAnimation();\n      // Clean up any debug elements\n      cleanupDebugElements();\n    });\n\n    client.on(\"agent_start_talking\", () => {\n      console.log(\"agent_start_talking - STARTING CURSOR ANIMATION\");\n      setEventStatus(prev => ({ ...prev, agentStartTalking: true, agentStopTalking: false }));\n      \n      // Start cursor animation with proper cursor control\n      startCursorAnimation();\n    });\n\n    client.on(\"agent_stop_talking\", () => {\n      console.log(\"agent_stop_talking - STOPPING CURSOR ANIMATION\");\n      setEventStatus(prev => ({ ...prev, agentStopTalking: true, agentStartTalking: false }));\n      // Stop cursor animation when agent stops talking\n      stopCursorAnimation();\n    });\n\n    client.on(\"update\", (update) => {\n      console.log(\"Update received:\", update);\n      if (update.transcript) {\n        // Check if transcript is an object with role and content properties\n        if (typeof update.transcript === 'object' && update.transcript.role && update.transcript.content) {\n          // Extract the content text\n          setEventStatus(prev => ({ ...prev, transcript: update.transcript.content }));\n        } \n        // Check if transcript is an array of message objects\n        else if (Array.isArray(update.transcript)) {\n          // Map through messages and format them\n          const formattedTranscript = update.transcript\n            .map(msg => {\n              if (typeof msg === 'object' && msg.role && msg.content) {\n                return `${msg.role}: ${msg.content}`;\n              }\n              return String(msg); // Convert to string if it's some other type\n            })\n            .join('\\n');\n          setEventStatus(prev => ({ ...prev, transcript: formattedTranscript }));\n        } \n        // If it's a string or can be converted to string\n        else {\n          setEventStatus(prev => ({ ...prev, transcript: String(update.transcript) }));\n        }\n      }\n    });\n\n    client.on(\"metadata\", (metadata) => {\n      console.log(\"Metadata received:\", metadata);\n    });\n\n    client.on(\"error\", (error) => {\n      console.error(\"An error occurred:\", error);\n      setEventStatus(prev => ({ ...prev, error: error.message || \"Unknown error\" }));\n      client.stopCall();\n    });\n    \n    // Clean up event listeners on component unmount\n    return () => {\n      if (client) {\n        client.stopCall();\n      }\n      \n      // Clean up animation and show cursor\n      stopCursorAnimation();\n      document.body.classList.remove('cursor-controlled');\n      \n      // Remove debug elements\n      cleanupDebugElements();\n    };\n  }, []);\n  \n  // Function to generate an access token from the server\n  const generateAccessToken = async () => {\n    try {\n      setIsGeneratingToken(true);\n      setEventStatus(prev => ({ ...prev, error: null }));\n      console.log(\"Requesting access token from server...\");\n      \n      // Make the API call to our server endpoint\n      const response = await fetch(TOKEN_SERVER_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          agent_id: AGENT_ID,\n        })\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || `Server responded with status: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (!data.access_token) {\n        throw new Error(\"No access token received from server\");\n      }\n      \n      console.log(\"Access token received from server:\", data.access_token);\n      setAccessToken(data.access_token);\n      setCallInfo(data); // Store the full call info for reference\n      setIsGeneratingToken(false);\n      \n      return data.access_token;\n    } catch (error) {\n      console.error(\"Failed to generate access token:\", error);\n      setEventStatus(prev => ({ ...prev, error: error.message || \"Failed to generate access token\" }));\n      setIsGeneratingToken(false);\n      return null;\n    }\n  };\n  \n  const checkMicrophonePermission = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      setMicPermission('granted');\n      // Stop the stream tracks immediately\n      stream.getTracks().forEach(track => track.stop());\n    } catch (error) {\n      console.error('Microphone permission denied:', error);\n      setMicPermission('denied');\n    }\n  };\n  \n  const requestMicrophonePermission = async () => {\n    try {\n      await navigator.mediaDevices.getUserMedia({ audio: true });\n      setMicPermission('granted');\n      return true;\n    } catch (error) {\n      console.error('Failed to get microphone permission:', error);\n      setMicPermission('denied');\n      return false;\n    }\n  };\n  \n  const startCall = async () => {\n    if (!retellWebClient || isCallActive) return;\n    \n    // First ensure we have microphone permissions\n    if (micPermission !== 'granted') {\n      const permissionGranted = await requestMicrophonePermission();\n      if (!permissionGranted) {\n        alert('Microphone permission is required to start a call');\n        return;\n      }\n    }\n    \n    try {\n      // Reset event status\n      setEventStatus({\n        callStarted: false,\n        callEnded: false,\n        agentStartTalking: false,\n        agentStopTalking: false,\n        error: null,\n        transcript: ''\n      });\n      \n      // Ensure we have a valid token\n      if (!accessToken) {\n        const token = await generateAccessToken();\n        if (!token) {\n          throw new Error(\"Failed to generate a valid access token\");\n        }\n      }\n      \n      console.log(\"Starting call with access token...\");\n      \n      // Start the call using the access token\n      await retellWebClient.startCall({\n        accessToken: accessToken,\n        sampleRate: 24000,\n        captureDeviceId: \"default\",\n        emitRawAudioSamples: false,\n      });\n      \n      setIsCallActive(true);\n    } catch (error) {\n      console.error(\"Failed to start call:\", error);\n      setEventStatus(prev => ({ ...prev, error: error.message || \"Failed to start call\" }));\n    }\n  };\n  \n  const stopCall = () => {\n    if (retellWebClient && isCallActive) {\n      retellWebClient.stopCall();\n      setIsCallActive(false);\n    }\n  };\n  \n  // Function to check if token is expired (tokens are valid for 30 seconds)\n  const isTokenExpired = () => {\n    // If we don't have token info, consider it expired\n    if (!accessToken || !callInfo) return true;\n    \n    // Track when we received the token in our application\n    if (!callInfo._tokenReceivedTime) {\n      // If this is the first time checking, add a timestamp of when we received it\n      callInfo._tokenReceivedTime = Date.now();\n      setCallInfo({...callInfo}); // Update the state to save this timestamp\n      return false; // Token is fresh\n    }\n    \n    // Calculate how long ago we received the token\n    const tokenReceivedTime = callInfo._tokenReceivedTime;\n    const currentTime = Date.now();\n    const tokenAgeInSeconds = (currentTime - tokenReceivedTime) / 1000;\n    \n    // Token expires after 30 seconds, but we consider it expired at 25s\n    // to give us a buffer to generate a new one\n    return tokenAgeInSeconds > 25;\n  };\n  \n  // New function to handle loading completion and initialize Spline only once\n  const handleLoadingComplete = () => {\n    setLoadingComplete(true);\n    setSplineInitialized(true);\n  };\n\n  // For test purposes, update the test button click handler\n  const testCursorMovement = () => {\n    console.log(\"Testing cursor movement\");\n    startCursorAnimation();\n  };\n\n  // Component cleanup for debug elements\n  useEffect(() => {\n    return () => {\n      console.log(\"Cleaning up cursor animations and debug elements\");\n      if (cursorAnimationRef.current) {\n        cancelAnimationFrame(cursorAnimationRef.current);\n      }\n      \n      // Remove all debug elements\n      const virtualCursor = document.getElementById('virtual-cursor');\n      if (virtualCursor) document.body.removeChild(virtualCursor);\n      \n      const debugCursor = document.getElementById('debug-cursor');\n      if (debugCursor) document.body.removeChild(debugCursor);\n    };\n  }, []);\n\n  // Add special handler for when page visibility changes\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.hidden) {\n        // Page is hidden, stop animations\n        if (cursorAnimationRef.current) {\n          cancelAnimationFrame(cursorAnimationRef.current);\n          setIsCursorControlled(false);\n        }\n      } else {\n        // Page is visible again, restart animation if agent is talking\n        if (eventStatus.agentStartTalking && !eventStatus.agentStopTalking && isCallActive) {\n          startCursorAnimation();\n        }\n      }\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n    };\n  }, [eventStatus.agentStartTalking, eventStatus.agentStopTalking, isCallActive]);\n\n  return (\n    <div className={`App ${isCursorControlled && !isUserMovingCursor ? 'cursor-controlled' : ''}`}>\n      {!loadingComplete ? (\n        <SplineLoader onLoadingComplete={handleLoadingComplete} />\n      ) : (\n        <>\n          {/* Main Spline Animation filling the entire viewport */}\n          <div className=\"spline-container\">\n            {/* Use splineInitialized to ensure it's only mounted once */}\n            {splineInitialized && (\n              <SplineViewer \n                ref={splineInstanceRef}\n                url=\"https://prod.spline.design/8CIsvX5hg8u-JUKM/scene.splinecode\"\n                options={{\n                  hint: true,\n                  'loading-anim-type': 'spinner-small-dark'\n                }}\n                persistOnUpdate={true}\n              />\n            )}\n            \n            {/* Test button for debugging cursor movement */}\n            <button \n              onClick={testCursorMovement}\n              style={{\n                position: 'absolute',\n                top: '10px',\n                left: '10px',\n                zIndex: 100,\n                background: 'rgba(0,0,0,0.5)',\n                color: 'white',\n                border: 'none',\n                padding: '5px 10px',\n                cursor: 'pointer'\n              }}\n            >\n              Test Eyes\n            </button>\n          </div>\n          \n          {/* Minimal UI sidebar */}\n          <div className={`sidebar ${showUI ? 'open' : 'closed'}`}>\n            <div className=\"toggle-ui\" onClick={() => setShowUI(!showUI)}>\n              {showUI ? '×' : '≡'}\n            </div>\n            \n            <div className=\"sidebar-content\">\n              <h2>AI Voice</h2>\n              \n              <div className=\"status-indicator\">\n                <div className={`status-dot ${isCallActive ? 'active' : 'inactive'}`}></div>\n                <span>{isCallActive ? 'Connected' : 'Disconnected'}</span>\n              </div>\n              \n              {micPermission !== 'granted' && (\n                <button \n                  onClick={requestMicrophonePermission}\n                  className=\"btn-secondary btn-small\"\n                >\n                  Enable Mic\n                </button>\n              )}\n              \n              <div className=\"control-buttons\">\n                <button \n                  onClick={!accessToken || isTokenExpired() ? generateAccessToken : startCall} \n                  disabled={isCallActive || isGeneratingToken}\n                  className=\"btn-primary\"\n                >\n                  {!accessToken || isTokenExpired() \n                    ? \"Connect\" \n                    : isGeneratingToken \n                      ? \"...\" \n                      : \"Start\"}\n                </button>\n                \n                {isCallActive && (\n                  <button \n                    onClick={stopCall} \n                    className=\"btn-danger\"\n                  >\n                    End\n                  </button>\n                )}\n              </div>\n              \n              {eventStatus.error && (\n                <div className=\"error-badge\">\n                  Error: {eventStatus.error}\n                </div>\n              )}\n              \n              {/* Minimalistic talking indicator */}\n              {isCallActive && (\n                <div className=\"talking-indicator\">\n                  {eventStatus.agentStartTalking && !eventStatus.agentStopTalking ? (\n                    <div className=\"wave-animation\">\n                      <div className=\"wave\"></div>\n                      <div className=\"wave\"></div>\n                      <div className=\"wave\"></div>\n                      <div className=\"wave\"></div>\n                    </div>\n                  ) : null}\n                </div>\n              )}\n              \n              {/* Transcript in a minimal scrollable area */}\n              {eventStatus.transcript && (\n                <div className=\"mini-transcript\">\n                  <p style={{ whiteSpace: 'pre-line' }}>{eventStatus.transcript}</p>\n                </div>\n              )}\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}